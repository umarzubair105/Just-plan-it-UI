<div class="container-lg mt-0 px-0">
  <div class="col-md-12 offset-md-0">
    <div class="text-end mt-2">
      <a aria-controls="helpSection" aria-expanded="false" class="btn btn-link text-decoration-none" data-bs-toggle="collapse"
         href="#helpSection" role="button">
        <i class="bi bi-info-circle me-1"></i> Need Help?
      </a>
    </div>

    <!-- Help Card (Collapsed by default) -->
    <div class="collapse" id="helpSection">
      <div class="card shadow-sm mb-3 mt-2">
        <div class="card-body">
          <h5 class="card-title">{{messageChange('Estimation for Deliverable')}}</h5>
          <p class="card-text">
            {{messageChange(' Here we go to define time estimation required for each role to get the deliverable done within a release.\n' +
            '            We can define the number of resources more than one if multiple resources of same role need to work on it within release.')}}
          </p>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <h4 class="mb-0"><i class="bi  bi-clock me-2"></i> Estimates for: {{epicBean.code}}</h4>
        <button (click)="closeDialog()" class="btn btn-sm text-white">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
        <form  #userForm="ngForm" >
        <div class="card-body">

          <table class="table table-striped table-hover table-bordered table-sm-custom text-sm">
            <thead class="table-secondary" >
            <tr>
              <th>Role</th>
              <th>Estimate</th>
              <th>Resources</th>
              <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let epicEstimate of epicEstimatBeans; let i = index">
              <td>
                {{ epicEstimate.roleName }}
              </td>
              <td>
                <input id="estimateStr-{{ i }}" [(ngModel)]="epicEstimate.estimateStr" type="text"
                          name="estimateStr-{{ i }}"
                          class="form-control"
                       [readOnly]="!(isManager(this.rights) || epicEstimate.roleId==this.rights.productRoleId)"
                      #estimateStr="ngModel"
                          [ngClass]="{ 'is-invalid': estimateStr.invalid && (estimateStr.dirty || estimateStr.touched) }"
                          [showErrors]="{ required: 'Estimate is required', step:'Step' }"
                      />
              </td>

              <td> <input id="resources-{{ i }}" [(ngModel)]="epicEstimate.resources" type="number"
                          name="resources-{{ i }}"
                          required class="form-control"
                          min="1"
                          [readOnly]="!(isManager(this.rights) || epicEstimate.roleId==this.rights.productRoleId)"
                          #resources="ngModel"
                          [ngClass]="{ 'is-invalid': resources.invalid && (resources.dirty || resources.touched) }"
                          [showErrors]="{ required: 'Resources is required',min: 'Min value is 1', step:'Step' }"
                          />
              </td>
              <td class="text-center" *ngIf="isManager(this.rights) || epicEstimate.roleId==this.rights.productRoleId">
                <button class="btn btn-danger btn-sm"  (click)="removeEpicEstimate(i)" [disabled]="epicEstimate.estimateStr==''">Not Required</button>
              </td>
              <td class="text-center" *ngIf="!(isManager(this.rights) || epicEstimate.roleId==this.rights.productRoleId)">
              </td>
            </tr>
            </tbody>
          </table>
        </div>
          <div class="text-center mb-2 d-flex justify-content-center gap-2">
            <button type="submit" class="btn btn-primary w-20" [disabled]="userForm.invalid" (click)="onSubmit(userForm)">Save & Close</button>
            <button type="submit" class="btn btn-secondary ms-2 w-20" (click)="closeDialog()">Close</button>
          </div>
      </form>

    </div>
  </div>
</div>


