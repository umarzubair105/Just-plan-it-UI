<div class="container-lg mt-0 px-0">
  <div class="col-md-12 offset-md-0">
    <div class="text-end mt-2">
      <a aria-controls="helpSection" aria-expanded="false" class="btn btn-link text-decoration-none"
         data-bs-toggle="collapse"
         href="#helpSection" role="button">
        <i class="bi bi-info-circle me-1"></i> Need Help?
      </a>
    </div>

    <!-- Help Card (Collapsed by default) -->
    <div class="collapse" id="helpSection">
      <div class="card shadow-sm mb-3 mt-2">
        <div class="card-body">
          <h5 class="card-title">{{ messageChange(entityType) | titlecase }} {{ messageChange(label) | titlecase }}</h5>
          <p class="card-text">
            {{ messageChange('Update related documents and urls.') }}
          </p>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <h4 class="mb-0"><i
          class="bi  bi-file-earmark me-2"></i> {{ messageChange(entityType) | titlecase }} {{ entityName }} {{ messageChange(label) | titlecase }} </h4>
        <button (click)="closeDialog()" class="btn btn-sm text-white">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>

      <div class="card-body">
        <div class="d-flex align-items-center mb-2">
          <h5 class="mb-0 me-2">Documents</h5>
        </div>
        <div *ngIf="files.length>0" class="table-responsive">
          <table class="table table-striped table-hover table-bordered table-sm-custom text-sm">
            <thead class="table-secondary">
            <tr>
              <th>File</th>
              <th>Description</th>
              <th>Added By</th>
              <th>Added At</th>
              <th *ngIf="isManager(this.rights)">Action</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let detail of files">
              <td><a (click)="download(detail)" class="btn btn-sm btn-tight-custom me-1"
                     title="Download">
                {{ detail.name }}
              </a></td>
              <td>{{ detail.details }}</td>
              <td>{{ detail.createdByName }}</td>
              <td>{{ detail.createdDate ? (detail.createdDate | date: AppConstants.DATE_TIME_FORMAT) : '-' }}</td>
              <td *ngIf="isManager(this.rights)" class="text-center">
                <a (click)="deleteEntityDetail(detail)" class="btn btn-sm btn-tight-custom"
                   title="Delete">
                  <i class="bi bi-trash action-icon"></i>
                </a>
              </td>
            </tbody>
          </table>
        </div>
        <form #attachForm="ngForm" (submit)="onSubmitFileForm()"
              class="align-items-center gap-2 mt-2"
              enctype="multipart/form-data">

          <input (change)="onFileSelected($event)"
                 class="form-control form-control-sm w-auto"
                 required type="file"/>

          <div class="w-100"></div> <!-- ðŸ‘ˆ forces next element to next line -->
          <div class="d-flex align-items-center gap-2 mt-2">
            <input [(ngModel)]="descriptionForFileUpload"
                   class="form-control form-control-sm"
                   name="descriptionForFileUpload"
                   placeholder="File Description"
                   required
                   type="text"/>

            <button [disabled]="attachForm.invalid" class="btn btn-sm btn-primary" type="submit">Upload</button>
          </div>
        </form>

        <div class="d-flex align-items-center mb-2 mt-4">
          <h5 class="mb-0 me-2">Urls</h5>
        </div>

        <div *ngIf="urls.length>0" class="table-responsive">
          <table class="table table-striped table-hover table-bordered table-sm-custom text-sm">
            <thead class="table-secondary">
            <tr>
              <th>Url</th>
              <th>Description</th>
              <th>Added By</th>
              <th>Added At</th>
              <th *ngIf="isManager(this.rights)">Action</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let detail of urls">
              <td>
                {{ detail.name }}
              </td>
              <td>{{ detail.details }}</td>
              <td>{{ detail.createdByName }}</td>
              <td>{{ detail.createdDate ? (detail.createdDate | date: AppConstants.DATE_TIME_FORMAT) : '-' }}</td>
              <td *ngIf="isManager(this.rights)" class="text-center">
                <a (click)="deleteEntityDetail(detail)" class="btn btn-sm btn-tight-custom"
                   title="Delete">
                  <i class="bi bi-trash action-icon"></i>
                </a>
              </td>
            </tbody>
          </table>
        </div>
        <form #urlForm="ngForm" class="d-flex align-items-center gap-2 mt-2">
          <input [(ngModel)]="url.name" class="form-control form-control-sm w-auto" name="name" placeholder="Url"
                 required type="text"/>
          <input [(ngModel)]="url.details" class="form-control form-control-sm w-auto" name="details" placeholder="Description"
                 required type="text"/>
          <button (click)="addEntityDetail(url, EntityDetailType.URL)" [disabled]="urlForm.invalid" class="btn btn-sm btn-primary"
                  type="submit">Add
          </button>
        </form>
      </div>
      <div class="text-center mt-2 d-flex justify-content-center gap-2 mb-3">
        <button (click)="closeDialog()" class="btn btn-secondary ms-2 w-20" type="submit">Close</button>
      </div>
    </div>

  </div>
</div>

